{"ast":null,"code":"import * as signalR from '@microsoft/signalr';\nimport { HubConnectionBuilder, Subject } from '@microsoft/signalr';\nexport class TrackInfo {\n  constructor() {\n    this.IsBeat = false;\n  }\n}\nexport class SignalrService {\n  constructor() {\n    this.$allFeed = new Subject();\n  }\n  get AllFeedObservable() {\n    return this.$allFeed;\n  }\n  startConnection() {\n    return new Promise((resolve, reject) => {\n      this.hubConnection = new HubConnectionBuilder().withUrl(\"https://localhost:7133/hub\", {\n        skipNegotiation: true,\n        transport: signalR.HttpTransportType.WebSockets\n      }).build();\n      this.hubConnection.start().then(() => {\n        console.log(\"connection established\");\n        return resolve(true);\n      }).catch(err => {\n        console.log(\"error occured\" + err);\n        reject(err);\n      });\n    });\n  }\n  listenToAllFeeds() {\n    this.hubConnection.on(\"GetFeed\", data => {\n      this.$allFeed.next(data);\n    });\n  }\n}","map":{"version":3,"mappings":"AAAA,OAAO,KAAKA,OAAO,MAAM,oBAAoB;AAE7C,SAAwBC,oBAAoB,EAAEC,OAAO,QAAQ,oBAAoB;AAKjF,OAAM,MAAOC,SAAS;EAAtBC;IAEE,WAAM,GAAY,KAAK;EACzB;;AAEA,OAAM,MAAOC,cAAc;EAA3BD;IAGU,aAAQ,GAAuB,IAAIF,OAAO,EAAa;EAiCjE;EA9BE,IAAWI,iBAAiB;IAC1B,OAAO,IAAI,CAACC,QAAQ;EACtB;EAEOC,eAAe;IACpB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;MACrC,IAAI,CAACC,aAAa,GAAG,IAAIX,oBAAoB,EAAE,CAC5CY,OAAO,CAAC,4BAA4B,EAAE;QACrCC,eAAe,EAAE,IAAI;QACrBC,SAAS,EAAEf,OAAO,CAACgB,iBAAiB,CAACC;OACtC,CAAC,CAACC,KAAK,EAAE;MAEZ,IAAI,CAACN,aAAa,CAACO,KAAK,EAAE,CACvBC,IAAI,CAAC,MAAK;QAETC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;QACrC,OAAOZ,OAAO,CAAC,IAAI,CAAC;MACtB,CAAC,CAAC,CACDa,KAAK,CAAEC,GAAQ,IAAI;QAClBH,OAAO,CAACC,GAAG,CAAC,eAAe,GAAGE,GAAG,CAAC;QAClCb,MAAM,CAACa,GAAG,CAAC;MACb,CAAC,CAAC;IACN,CAAC,CAAC;EACJ;EAEOC,gBAAgB;IACL,IAAI,CAACb,aAAc,CAACc,EAAE,CAAC,SAAS,EAAGC,IAAe,IAAI;MACpE,IAAI,CAACpB,QAAQ,CAACqB,IAAI,CAACD,IAAI,CAAC;IAC1B,CAAC,CAAC;EACJ","names":["signalR","HubConnectionBuilder","Subject","TrackInfo","constructor","SignalrService","AllFeedObservable","$allFeed","startConnection","Promise","resolve","reject","hubConnection","withUrl","skipNegotiation","transport","HttpTransportType","WebSockets","build","start","then","console","log","catch","err","listenToAllFeeds","on","data","next"],"sourceRoot":"","sources":["C:\\Project\\DmxLightV2\\LightMixerAngular\\ClientApp\\src\\app\\fetch-data\\SignalrService.ts"],"sourcesContent":["import * as signalR from '@microsoft/signalr';\r\nimport { Injectable } from '@angular/core';\r\nimport { HubConnection, HubConnectionBuilder, Subject } from '@microsoft/signalr';\r\nimport { Observable } from 'rxjs';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n\r\nexport class TrackInfo\r\n{\r\n  IsBeat: boolean = false;\r\n}\r\n\r\nexport class SignalrService {\r\n\r\n  private hubConnection: any;\r\n  private $allFeed: Subject<TrackInfo> = new Subject<TrackInfo>();\r\n  \r\n\r\n  public get AllFeedObservable(): Subject<TrackInfo> {\r\n    return this.$allFeed;\r\n  }\r\n\r\n  public startConnection() {\r\n    return new Promise((resolve, reject) => {\r\n      this.hubConnection = new HubConnectionBuilder()\r\n        .withUrl(\"https://localhost:7133/hub\", {\r\n          skipNegotiation: true,\r\n          transport: signalR.HttpTransportType.WebSockets\r\n        }).build();\r\n\r\n      this.hubConnection.start()\r\n        .then(() => {\r\n          \r\n          console.log(\"connection established\");\r\n          return resolve(true);\r\n        })\r\n        .catch((err: any) => {\r\n          console.log(\"error occured\" + err);\r\n          reject(err);\r\n        });\r\n    });\r\n  }\r\n\r\n  public listenToAllFeeds() {\r\n    (<HubConnection>this.hubConnection).on(\"GetFeed\", (data: TrackInfo) => {\r\n      this.$allFeed.next(data);\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}